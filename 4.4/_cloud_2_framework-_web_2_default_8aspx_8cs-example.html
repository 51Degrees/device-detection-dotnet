<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection .NET: Cloud/Framework-Web/Default.aspx.cs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection .NET
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_cloud_2_framework-_web_2_default_8aspx_8cs-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">Cloud/Framework-Web/Default.aspx.cs</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example demonstrates how to use the cloud-based device detection API in a .NET Framework website.The source code for this example is available in full on <a href="https://github.com/51Degrees/device-detection-dotnet/tree/master/Examples/Cloud/Framework-Web">GitHub</a>.</p>
<p>Required NuGet Dependencies:</p><ul>
<li><a href="https://www.nuget.org/packages/FiftyOne.DeviceDetection/">FiftyOne.DeviceDetection</a></li>
<li><a href="https://www.nuget.org/packages/FiftyOne.Pipeline.Web/">FiftyOne.Pipeline.Web</a></li>
</ul>
<h2>Overview</h2>
<p>The FiftyOne.Pipeline.Web package includes an IHttpModule implementation called 'PipelineModule'. This is inserted into the start of the ASP.NET processing pipeline so that it can intercept the request and perform device detection.</p>
<p>The module replaces the default <code>HttpCapabilitiesBase.BrowserCapabilitiesProvider</code> with a 51Degrees version. This means that when values are requested (e.g. Request.Browser.IsMobileDevice), we can intercept that request and supply a result from our device detection.</p>
<p>If you require access to properties and features that are not available through <code>BrowserCapabilitiesProvider</code>, you will need to cast browser capabilities to our <code>PipelineCapabilities</code> class in order to access the <code>IFlowData</code> instance directly:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">var flowData = ((PipelineCapabilities)Request.Browser).FlowData;</div><div class="c-code__line">var deviceData = flowData.Get&lt;IDeviceData&gt;();</div></div><p>The 'IPipeline' instance that is being used can also be accessed through the static <code>WebPipeline</code> class:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">var deviceDetectionPipeline = WebPipeline.GetInstance();</div></div><h2>Configuration</h2>
<p>By default, a 51Degrees.json file is used to supply the Pipeline configuration. For more details about the available options, check the relevant builder classes. For example, the CloudRequestEngineBuilder. The methods available on the builder are the same as those that will be available in the configuration file.</p>
<p>Note that you will need to create a 'resource key' using our <a href="https://configure.51degrees.com/1QWJwHxl">configurator</a> site in order to get this example to work. The previous link will pre-populate the key with the properties that are used in this example. See our <a href="http://51degrees.com/documentation/4.4/_concepts__configurator.html">documentation</a> for more detail on resource keys and the configurator site. Once created, the key will need to be copied into the configuration file:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">{</div><div class="c-code__line">  &quot;PipelineOptions&quot;: {</div><div class="c-code__line">    &quot;Elements&quot;: [</div><div class="c-code__line">      {</div><div class="c-code__line">        // Required to unpack the GetHighEntropyValues base 64 encoded string into UACH HTTP headers.</div><div class="c-code__line">        &quot;BuilderName&quot;: &quot;UachJsConversionElement&quot;</div><div class="c-code__line">      },</div><div class="c-code__line">      {</div><div class="c-code__line">        &quot;BuilderName&quot;: &quot;CloudRequestEngine&quot;,</div><div class="c-code__line">        // Obtain a resource key with the properties required to run this </div><div class="c-code__line">        // example for free: https://configure.51degrees.com/1QWJwHxl</div><div class="c-code__line">        &quot;BuildParameters&quot;: {</div><div class="c-code__line">          &quot;ResourceKey&quot;: &quot;!!ENTER_YOUR_RESOURCE_KEY_HERE!!&quot;,</div><div class="c-code__line">          &quot;CloudRequestOrigin&quot;: &quot;51Degrees.example.com&quot;,</div><div class="c-code__line">          // Explicitly include just the properties used by the example.</div><div class="c-code__line">          &quot;Properties&quot;: &quot;HardwareVendor,HardwareModel,HardwareName,IsMobile,JavascriptGetHighEntropyValues,Promise,Fetch,DeviceType,PlatformVendor,PlatformName,PlatformVersion,BrowserVendor,BrowserName,BrowserVersion,ScreenPixelsWidth,ScreenPixelsHeight,JavascriptScreenPixelsWidth,JavascriptScreenPixelsHeight&quot;</div><div class="c-code__line">        }</div><div class="c-code__line">      },</div><div class="c-code__line">      {</div><div class="c-code__line">        &quot;BuilderName&quot;: &quot;DeviceDetectionCloudEngine&quot;</div><div class="c-code__line">      },</div><div class="c-code__line">      {</div><div class="c-code__line">        &quot;BuilderName&quot;: &quot;JavaScriptBuilderElement&quot;,</div><div class="c-code__line">        &quot;BuildParameters&quot;: {</div><div class="c-code__line">          &quot;Minify&quot;: true</div><div class="c-code__line">        }</div><div class="c-code__line">      }</div><div class="c-code__line">    ],</div><div class="c-code__line">    // Both these options default to true anyway.</div><div class="c-code__line">    // They are specified here for illustrative purposes.</div><div class="c-code__line">    &quot;ClientSideEvidenceEnabled&quot;: true,</div><div class="c-code__line">    &quot;UseAsyncScript&quot;: true,</div><div class="c-code__line">    &quot;BuildParameters&quot;: {</div><div class="c-code__line">      &quot;ClientSideEnabled&quot;: true,</div><div class="c-code__line">      &quot;ClientSideEvidenceEnabled&quot;: true,</div><div class="c-code__line">      &quot;UseAsyncScript&quot;: true</div><div class="c-code__line">    }</div><div class="c-code__line">  }</div><div class="c-code__line">}</div></div><h3>Web.config</h3>
<p>The 51Degrees API mostly targets .NET Standard. This means you may get an error like:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">CS0012: The type <span class="c-code__stringliteral">&#39;System.Object&#39;</span> is defined in an assembly that is not referenced. You must add </div><div class="c-code__line">a reference to assembly <span class="c-code__stringliteral">&#39;netstandard, Version=2.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51&#39;</span>.</div></div><p>In this case, you will need to add a section similar to the following to your web.config:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">&lt;compilation debug=<span class="c-code__stringliteral">&quot;true&quot;</span> targetFramework=<span class="c-code__stringliteral">&quot;4.7.2&quot;</span>&gt;</div><div class="c-code__line">  &lt;assemblies&gt;</div><div class="c-code__line">    &lt;add assembly=<span class="c-code__stringliteral">&quot;netstandard, Version=2.0.0.0, Culture=neutral, </span></div><div class="c-code__line"><span class="c-code__stringliteral">          PublicKeyToken=cc7b13ffcd2ddd51&quot;</span>/&gt;</div><div class="c-code__line">  &lt;/assemblies&gt;</div><div class="c-code__line">&lt;/compilation&gt;</div></div><p>Another common problem is an error loading a specific version of a library because your project is using a newer version. For example, this message is appearing because our API only requires version 11 of the Newtonsoft library, but the sample project is using version 13:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">Could not load file or assembly <span class="c-code__stringliteral">&#39;Newtonsoft.Json, Version=11.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&#39;</span> or one of its dependencies. The located assembly<span class="c-code__stringliteral">&#39;s manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)</span></div></div><p>Fixing this requires a binding redirect to tell the runtime to use the installed version, rather than the requested version. For example, to direct it to use version 13 of the Newtonsoft library regardless of the requested version, we would add:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">&lt;runtime&gt;</div><div class="c-code__line">  &lt;assemblyBinding xmlns=<span class="c-code__stringliteral">&quot;urn:schemas-microsoft-com:asm.v1&quot;</span>&gt;</div><div class="c-code__line">    &lt;dependentAssembly&gt;</div><div class="c-code__line">      &lt;assemblyIdentity name=<span class="c-code__stringliteral">&quot;Newtonsoft.Json&quot;</span> publicKeyToken=<span class="c-code__stringliteral">&quot;30ad4fe6b2a6aeed&quot;</span> /&gt;</div><div class="c-code__line">      &lt;bindingRedirect oldVersion=<span class="c-code__stringliteral">&quot;0.0.0.0-13.0.0.0&quot;</span> newVersion=<span class="c-code__stringliteral">&quot;13.0.0.0&quot;</span> /&gt;</div><div class="c-code__line">    &lt;/dependentAssembly&gt;</div><div class="c-code__line">  &lt;/assemblyBinding&gt;</div><div class="c-code__line">&lt;/runtime&gt;</div></div><h2>Load Assemblies</h2>
<p>Any builders that are specified in configuration must also have their assemblies loaded into the AppDomain. This is handled in Global.asax:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2022 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> * </span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by </span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading, </span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection.html">DeviceDetection</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud.html">Cloud</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud_1_1_flow_elements.html">FlowElements</a>;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.CloudRequestEngine.FlowElements;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.Engines.FiftyOne.FlowElements;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.JavaScriptBuilder.FlowElement;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.JsonBuilder.FlowElement;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System.Web;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection.html">DeviceDetection</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_uach.html">Uach</a>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">namespace </span><a class="code" href="namespace_framework___web.html">Framework_Web</a></div><div class="c-code__line">{</div><div class="c-code__line">    <span class="c-code__keyword">public</span> <span class="c-code__keyword">class </span>Global : HttpApplication</div><div class="c-code__line">    {</div><div class="c-code__line">        <span class="c-code__keywordtype">void</span> Application_Start(<span class="c-code__keywordtype">object</span> sender, EventArgs e)</div><div class="c-code__line">        {</div><div class="c-code__line">            <span class="c-code__comment">// Make sure the assemblies that are needed by the pipeline are loaded into the</span></div><div class="c-code__line">            <span class="c-code__comment">// app domain.</span></div><div class="c-code__line">            <span class="c-code__comment">// This is needed in order from BuildFromConfiguration to be able to find the</span></div><div class="c-code__line">            <span class="c-code__comment">// relevant builder types when using reflection.</span></div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(UachJsConversionElement).Assembly.GetName());</div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(CloudRequestEngine).Assembly.GetName());</div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(DeviceDetectionCloudEngine).Assembly.GetName());</div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(JavaScriptBuilderElement).Assembly.GetName());</div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(JsonBuilderElement).Assembly.GetName());</div><div class="c-code__line">            AppDomain.CurrentDomain.Load(typeof(SequenceElementBuilder).Assembly.GetName());</div><div class="c-code__line">        }</div><div class="c-code__line">    }</div><div class="c-code__line">}</div></div><h2>Results</h2>
<p>This example includes a simple demonstration page that shows how to access different values from the results. This page also demonstrates how to use client-side evidence to determine the model of Apple devices.</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">&lt;%@ Page Language=&quot;C#&quot; AutoEventWireup=&quot;true&quot; CodeBehind=&quot;Default.aspx.cs&quot; Inherits=&quot;Framework_Web.Default&quot; %&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;%@ Import Namespace=&quot;FiftyOne.DeviceDetection&quot; %&gt;</div><div class="c-code__line">&lt;%@ Import Namespace=&quot;FiftyOne.DeviceDetection.Examples&quot; %&gt;</div><div class="c-code__line">&lt;%@ Import Namespace=&quot;FiftyOne.DeviceDetection.Cloud.FlowElements&quot; %&gt;</div><div class="c-code__line">&lt;%@ Import Namespace=&quot;FiftyOne.Pipeline.Web.Framework.Providers&quot; %&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;!DOCTYPE html&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</div><div class="c-code__line">&lt;head runat=&quot;server&quot;&gt;</div><div class="c-code__line">    &lt;title&gt;51Degrees Example&lt;/title&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;Content/Site.css&quot; /&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;%-- This JavaScript is dynamically generated based on the details of the detected device. </div><div class="c-code__line">        Including a reference to it allows us to collect client side evidence </div><div class="c-code__line">        (used for things such as Apple model detection) and access device detection </div><div class="c-code__line">        results in client side code.</div><div class="c-code__line">        Note that there doesn&#39;t need to be a physical file. The 51Degrees Pipeline will </div><div class="c-code__line">        intercept the request and serve it automatically.</div><div class="c-code__line">        --%&gt;</div><div class="c-code__line">    &lt;script async src=&#39;51Degrees.core.js&#39; type=&#39;text/javascript&#39;&gt;&lt;/script&gt;</div><div class="c-code__line">&lt;/head&gt;</div><div class="c-code__line">&lt;body&gt;</div><div class="c-code__line">    &lt;h2&gt;Web Integration Example&lt;/h2&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        This example demonstrates the use of the Pipeline API to perform device detection within a</div><div class="c-code__line">        simple ASP.NET Core web project. In particular, it highlights:</div><div class="c-code__line">        &lt;ol&gt;</div><div class="c-code__line">            &lt;li&gt;</div><div class="c-code__line">                Automatic handling of the &#39;Accept-CH&#39; header, which is used to request User-Agent</div><div class="c-code__line">                Client Hints from the browser</div><div class="c-code__line">            &lt;/li&gt;</div><div class="c-code__line">            &lt;li&gt;</div><div class="c-code__line">                Client-side evidence collection in order to identify Apple device models and properties</div><div class="c-code__line">                such as screen size.</div><div class="c-code__line">            &lt;/li&gt;</div><div class="c-code__line">        &lt;/ol&gt;</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line">    &lt;h3&gt;Client Hints&lt;/h3&gt;</div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        When the first request is made, browsers that support client hints will typically send a subset</div><div class="c-code__line">        of client hints values along with the User-Agent header.</div><div class="c-code__line">        If device detection determines that the browser does support client hints then it will request</div><div class="c-code__line">        that additional client hints headers are sent with future requests by sending the Accept-CH</div><div class="c-code__line">        header with the response.</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line">    &lt;p&gt;</div><div class="c-code__line">        Note that if you have visited this page previously, the value of Accept-CH will have been</div><div class="c-code__line">        cached so all requested client hints headers will be sent on the first request. Using features</div><div class="c-code__line">        such as &#39;private browsing&#39; or &#39;incognito mode&#39; will allow you to see the true first request</div><div class="c-code__line">        experience as the previous Accept-CH value will not be used.</div><div class="c-code__line">    &lt;/p&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;noscript&gt;</div><div class="c-code__line">        &lt;div class=&quot;example-alert&quot;&gt;</div><div class="c-code__line">            WARNING: JavaScript is disabled in your browser. This means that the callback discussed</div><div class="c-code__line">            further down this page will not fire and UACH headers will not be sent.</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">    &lt;/noscript&gt;</div><div class="c-code__line"></div><div class="c-code__line">    &lt;div id=&quot;content&quot;&gt;</div><div class="c-code__line">        &lt;h3&gt;Detection results&lt;/h3&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            The following values are determined by sever-side device detection</div><div class="c-code__line">            on the first request:</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            Note that all values below are retrieved using the strongly typed approach, </div><div class="c-code__line">            which is new for version 4. In order to provide easier migration for sites using </div><div class="c-code__line">            version 3 of this API, you can also access some properties from the </div><div class="c-code__line">            HttpBrowserCapabilities object. For example, is this site being accessed with </div><div class="c-code__line">            a mobile device? &lt;strong&gt;&lt;%= Request.Browser.IsMobileDevice ? &quot;Yes&quot; : &quot;No&quot; %&gt;&lt;/strong&gt;&lt;/p&gt;</div><div class="c-code__line">        &lt;table&gt;</div><div class="c-code__line">            &lt;tr&gt;</div><div class="c-code__line">                &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">            &lt;/tr&gt;</div><div class="c-code__line">            &lt;% </div><div class="c-code__line">                // Put the flow data and device data instances into local variables so we don&#39;t</div><div class="c-code__line">                // have to keep grabbing them.</div><div class="c-code__line">                var flowData = ((PipelineCapabilities)Request.Browser).FlowData;</div><div class="c-code__line">                var deviceData = flowData.Get&lt;IDeviceData&gt;();                </div><div class="c-code__line">                // Get the engine that is used to make requests to the cloud service.</div><div class="c-code__line">                var engine = flowData.Pipeline.GetElement&lt;DeviceDetectionCloudEngine&gt;(); </div><div class="c-code__line">                // Note that below we are using some helper methods from the</div><div class="c-code__line">                // FiftyOne.DeviceDeteciton.Examples project (TryGetValue and GetHumanReadable)</div><div class="c-code__line">                // These are mostly intended to handle scenarios where device detection does</div><div class="c-code__line">                // not have an answer.</div><div class="c-code__line">                // In a production scenario, you will probably want to handle these scenarios </div><div class="c-code__line">                // differently. Feel free to copy these helpers if they are useful though.</div><div class="c-code__line">            %&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Hardware Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.HardwareVendor.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Hardware Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.HardwareName.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Device Type:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.DeviceType.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Platform Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.PlatformVendor.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Platform Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.PlatformName.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Platform Version:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.PlatformVersion.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Browser Vendor:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.BrowserVendor.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Browser Name:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.BrowserName.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Browser Version:&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.BrowserVersion.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Screen width (pixels):&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.ScreenPixelsWidth.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">            &lt;tr class=&quot;lightyellow&quot;&gt;&lt;td&gt;&lt;b&gt;Screen height (pixels):&lt;/b&gt;&lt;/td&gt;&lt;td&gt; &lt;%= deviceData.TryGetValue(d =&gt; d.ScreenPixelsHeight.GetHumanReadable()) %&gt;&lt;/td&gt;&lt;/tr&gt;</div><div class="c-code__line">        &lt;/table&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line">    </div><div class="c-code__line">        &lt;div id=&quot;evidence&quot;&gt;</div><div class="c-code__line">            &lt;h3&gt;Evidence used&lt;/h3&gt;</div><div class="c-code__line">            &lt;p class=&quot;smaller&quot;&gt;Evidence was &lt;span class=&quot;lightgreen&quot;&gt;used&lt;/span&gt; / &lt;span class=&quot;lightyellow&quot;&gt;present&lt;/span&gt; for detection&lt;/p&gt;</div><div class="c-code__line">            &lt;table&gt;</div><div class="c-code__line">                &lt;tr&gt;</div><div class="c-code__line">                    &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                    &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">                &lt;/tr&gt;</div><div class="c-code__line">                &lt;% foreach (var evidence in flowData.GetEvidence().AsDictionary()) { %&gt;</div><div class="c-code__line">                    &lt;tr class=&quot;&lt;%= engine.EvidenceKeyFilter.Include(evidence.Key) ? &quot;lightgreen&quot; : &quot;lightyellow&quot; %&gt;&quot;&gt;</div><div class="c-code__line">                        &lt;td&gt;&lt;b&gt;&lt;%= evidence.Key %&gt;&lt;/b&gt;&lt;/td&gt;</div><div class="c-code__line">                        &lt;td&gt;&lt;%= evidence.Value %&gt;&lt;/td&gt;</div><div class="c-code__line">                    &lt;/tr&gt;</div><div class="c-code__line">                &lt;% } %&gt;</div><div class="c-code__line">            &lt;/table&gt;</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;div id=&quot;response-headers&quot;&gt;</div><div class="c-code__line">            &lt;h3&gt;Response headers&lt;/h3&gt;</div><div class="c-code__line">            &lt;table&gt;</div><div class="c-code__line">                &lt;tr&gt;</div><div class="c-code__line">                    &lt;th&gt;Key&lt;/th&gt;</div><div class="c-code__line">                    &lt;th&gt;Value&lt;/th&gt;</div><div class="c-code__line">                &lt;/tr&gt;</div><div class="c-code__line">                &lt;% foreach (var key in Response.Headers.AllKeys) { %&gt;</div><div class="c-code__line">                    &lt;tr class=&quot;lightyellow&quot;&gt;</div><div class="c-code__line">                        &lt;td&gt;&lt;b&gt;&lt;%= key %&gt;&lt;/b&gt;&lt;/td&gt;</div><div class="c-code__line">                        &lt;td&gt;&lt;%= string.Join(&quot;, &quot;, Response.Headers.GetValues(key)) %&gt;&lt;/td&gt;</div><div class="c-code__line">                    &lt;/tr&gt;</div><div class="c-code__line">                &lt;% } %&gt;</div><div class="c-code__line">            &lt;/table&gt;</div><div class="c-code__line">        &lt;/div&gt;</div><div class="c-code__line">        </div><div class="c-code__line">        &lt;% if (Response.Headers.AllKeys.Contains(&quot;Accept-CH&quot;) == false) { %&gt;</div><div class="c-code__line">            &lt;div class=&quot;example-alert&quot;&gt;</div><div class="c-code__line">                WARNING: There is no Accept-CH header in the response. This may indicate that your</div><div class="c-code__line">                browser does not support User-Agent Client Hints. This is not necessarily a problem,</div><div class="c-code__line">                but if you are wanting to try out detection using User-Agent Client Hints, then make</div><div class="c-code__line">                sure that your browser</div><div class="c-code__line">                &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/User-Agent_Client_Hints_API#browser_compatibility&quot;&gt;supports them&lt;/a&gt;.</div><div class="c-code__line">            &lt;/div&gt;</div><div class="c-code__line">        &lt;% } %&gt;</div><div class="c-code__line">        &lt;br /&gt;</div><div class="c-code__line"></div><div class="c-code__line">        &lt;h3&gt;Client-side Evidence and Apple Models&lt;/h3&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            The information shown below is determined after a callback is made to the server with</div><div class="c-code__line">            additional evidence that is gathered by JavaScript running on the client-side.</div><div class="c-code__line">            The callback will also include any additional client hints headers that have been requested.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            When an Apple device is used, the results from</div><div class="c-code__line">            the first request above will show all Apple models because the server cannot tell the</div><div class="c-code__line">            exact model of the device. In contrast, the results from the callback below will show</div><div class="c-code__line">            a smaller set of possible models.</div><div class="c-code__line">            This can be tested to some extent using most emulators, such as those in the</div><div class="c-code__line">            &#39;developer tools&#39; menu in Google Chrome. However, these are not the identical to real</div><div class="c-code__line">            devices so this can cause some unusual results. Using real devices will generally be more</div><div class="c-code__line">            successful.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;p&gt;</div><div class="c-code__line">            If you want to work with Apple Model or other client-side information, such as screen</div><div class="c-code__line">            width/height on the server, it will be available on the next request.</div><div class="c-code__line">            This is achieved by storing the additional client-side evidence as cookies on the client.</div><div class="c-code__line">            When a future page is requested, these cookies will be included with the request and the</div><div class="c-code__line">            device detection API will include them when working out the details of the device.</div><div class="c-code__line">            Refreshing this page can be used to show this in action. Any values that are unique to the</div><div class="c-code__line">            client-side values below will appear in the evidence values used and server-side results</div><div class="c-code__line">            after the refresh.</div><div class="c-code__line">        &lt;/p&gt;</div><div class="c-code__line">        &lt;% if (engine.DataSourceTier == &quot;Lite&quot;) { %&gt;</div><div class="c-code__line">            &lt;div class=&quot;example-alert&quot;&gt;</div><div class="c-code__line">                WARNING: You are using the free &#39;Lite&#39; data file. This does not include the client-side</div><div class="c-code__line">                evidence capabilities of the paid-for data file, so you will not see any additional</div><div class="c-code__line">                data below. Find out about the Enterprise data file on our</div><div class="c-code__line">                &lt;a href=&quot;https://51degrees.com/pricing&quot;&gt;pricing page&lt;/a&gt;.</div><div class="c-code__line">            &lt;/div&gt;</div><div class="c-code__line">        &lt;% } %&gt;</div><div class="c-code__line">    &lt;/div&gt;   </div><div class="c-code__line"></div><div class="c-code__line">&lt;/body&gt;</div><div class="c-code__line">&lt;/html&gt;</div><div class="c-code__line"></div><div class="c-code__line">&lt;script&gt;</div><div class="c-code__line">    window.onload = function () {</div><div class="c-code__line">        // Subscribe to the &#39;complete&#39; event.</div><div class="c-code__line">        fod.complete(function (data) {</div><div class="c-code__line">            // When the event fires, use the supplied data to populate a new table.</div><div class="c-code__line">            let fieldValues = [];</div><div class="c-code__line"></div><div class="c-code__line">            var hardwareName = typeof data.device.hardwarename == &quot;undefined&quot; ?</div><div class="c-code__line">                &quot;Unknown&quot; : data.device.hardwarename.join(&quot;, &quot;)</div><div class="c-code__line">            fieldValues.push([&quot;Hardware Name: &quot;, hardwareName]);</div><div class="c-code__line">            fieldValues.push([&quot;Platform: &quot;,</div><div class="c-code__line">                data.device.platformname + &quot; &quot; + data.device.platformversion]);</div><div class="c-code__line">            fieldValues.push([&quot;Browser: &quot;,</div><div class="c-code__line">                data.device.browsername + &quot; &quot; + data.device.browserversion]);</div><div class="c-code__line">            fieldValues.push([&quot;Screen width (pixels): &quot;, data.device.screenpixelswidth]);</div><div class="c-code__line">            fieldValues.push([&quot;Screen height (pixels): &quot;, data.device.screenpixelsheight]);</div><div class="c-code__line">            displayValues(fieldValues);</div><div class="c-code__line">        });</div><div class="c-code__line">    }</div><div class="c-code__line"></div><div class="c-code__line">    // Helper function to add a table that displays the supplied values.</div><div class="c-code__line">    function displayValues(fieldValues) {</div><div class="c-code__line">        var table = document.createElement(&quot;table&quot;);</div><div class="c-code__line">        var tr = document.createElement(&quot;tr&quot;);</div><div class="c-code__line">        addToRow(tr, &quot;th&quot;, &quot;Key&quot;, false);</div><div class="c-code__line">        addToRow(tr, &quot;th&quot;, &quot;Value&quot;, false);</div><div class="c-code__line">        table.appendChild(tr);</div><div class="c-code__line"></div><div class="c-code__line">        fieldValues.forEach(function (entry) {</div><div class="c-code__line">            var tr = document.createElement(&quot;tr&quot;);</div><div class="c-code__line">            tr.classList.add(&quot;lightyellow&quot;);</div><div class="c-code__line">            addToRow(tr, &quot;td&quot;, entry[0], true);</div><div class="c-code__line">            addToRow(tr, &quot;td&quot;, entry[1], false);</div><div class="c-code__line">            table.appendChild(tr);</div><div class="c-code__line">        });</div><div class="c-code__line"></div><div class="c-code__line">        var element = document.getElementById(&quot;content&quot;);</div><div class="c-code__line">        element.appendChild(table);</div><div class="c-code__line">    }</div><div class="c-code__line"></div><div class="c-code__line">    // Helper function to add an entry to a table row.</div><div class="c-code__line">    function addToRow(row, elementName, text, strong) {</div><div class="c-code__line">        var entry = document.createElement(elementName);</div><div class="c-code__line">        var textNode = document.createTextNode(text);</div><div class="c-code__line">        if (strong === true) {</div><div class="c-code__line">            var strongNode = document.createElement(&quot;strong&quot;);</div><div class="c-code__line">            strongNode.appendChild(textNode);</div><div class="c-code__line">            textNode = strongNode;</div><div class="c-code__line">        }</div><div class="c-code__line">        entry.appendChild(textNode);</div><div class="c-code__line">        row.appendChild(entry);</div><div class="c-code__line">    }</div><div class="c-code__line">&lt;/script&gt;</div></div><div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2022 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> * </span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by </span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading, </span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">using</span> System;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System.Web.UI;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">namespace </span><a class="code" href="namespace_framework___web.html">Framework_Web</a></div><div class="c-code__line">{</div><div class="c-code__line">    <span class="c-code__keyword">public</span> <span class="c-code__keyword">partial class </span>Default : Page</div><div class="c-code__line">    {</div><div class="c-code__line">        <span class="c-code__keyword">protected</span> <span class="c-code__keywordtype">void</span> Page_Load(<span class="c-code__keywordtype">object</span> sender, EventArgs e)</div><div class="c-code__line">        {</div><div class="c-code__line">        }</div><div class="c-code__line">    }</div><div class="c-code__line">}</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
