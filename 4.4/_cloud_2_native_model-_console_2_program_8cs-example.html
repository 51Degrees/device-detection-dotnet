<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection .NET: Cloud/NativeModel-Console/Program.cs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection .NET
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_cloud_2_native_model-_console_2_program_8cs-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">Cloud/NativeModel-Console/Program.cs</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example shows how to use the 51Degrees Cloud service to lookup the details of a device based on a given 'native model name'. Native model name is a string of characters that are returned from a query to the device's OS. There are different mechanisms to get native model names for <a href="https://developer.android.com/reference/android/os/Build#MODEL">Android devices</a> and <a href="https://gist.github.com/soapyigu/c99e1f45553070726f14c1bb0a54053b#file-machinename-swift">iOS devices</a></p>
<p>This example is available in full on <a href="https://github.com/51Degrees/device-detection-dotnet-examples/blob/main/Examples/Cloud/NativeModel-Console/Program.cs">GitHub</a>.</p>
<p>
<p>
To run this example, you will need to create a <strong>resource key</strong>. 
The resource key is used as shorthand to store the particular set of 
properties you are interested in as well as any associated license keys 
that entitle you to increased request limits and/or paid-for properties.
</p>
<p>
You can create a resource key using the 51Degrees 
<a href="https://configure.51degrees.com">Configurator</a>.
</p>
</p>
<p>Required NuGet Dependencies:</p><ul>
<li><a class="el" href="namespace_fifty_one_1_1_device_detection.html">FiftyOne.DeviceDetection</a></li>
<li>Microsoft.Extensions.Logging.Console </li>
</ul>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2025 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><span class="c-code__comment"> * Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><span class="c-code__comment"> * (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><span class="c-code__comment"> * amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><span class="c-code__comment"> * the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><span class="c-code__comment"> * clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><span class="c-code__comment"> * including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><span class="c-code__comment"> * in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><span class="c-code__comment"> * such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection.html">DeviceDetection</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud.html">Cloud</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud_1_1_data.html">Data</a>;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection.html">DeviceDetection</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud.html">Cloud</a>.<a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_cloud_1_1_flow_elements.html">FlowElements</a>;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.CloudRequestEngine.FlowElements;</div><div class="c-code__line"><span class="c-code__keyword">using</span> <a class="code" href="namespace_fifty_one.html">FiftyOne</a>.Pipeline.Core.FlowElements;</div><div class="c-code__line"><span class="c-code__keyword">using</span> Microsoft.Extensions.Logging;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System.IO;</div><div class="c-code__line"><span class="c-code__keyword">using</span> System.Net.Http;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">namespace </span><a class="code" href="namespace_fifty_one_1_1_device_detection_1_1_examples_1_1_cloud_1_1_native_model_lookup.html">FiftyOne.DeviceDetection.Examples.Cloud.NativeModelLookup</a></div><div class="c-code__line">{</div><div class="c-code__line">    <span class="c-code__keyword">public</span> <span class="c-code__keyword">class </span>Program</div><div class="c-code__line">    {</div><div class="c-code__line">        <span class="c-code__keyword">public</span> <span class="c-code__keyword">class </span>Example</div><div class="c-code__line">        {</div><div class="c-code__line">            <span class="c-code__comment">// Example values to use when looking up device details from native model names.</span></div><div class="c-code__line">            <span class="c-code__keyword">private</span> <span class="c-code__keyword">const</span> <span class="c-code__keywordtype">string</span> _nativeModel1 = <span class="c-code__stringliteral">&quot;SC-03L&quot;</span>;</div><div class="c-code__line">            <span class="c-code__keyword">private</span> <span class="c-code__keyword">const</span> <span class="c-code__keywordtype">string</span> _nativeModel2 = <span class="c-code__stringliteral">&quot;iPhone11,8&quot;</span>;</div><div class="c-code__line"></div><div class="c-code__line">            <span class="c-code__keyword">public</span> <span class="c-code__keywordtype">void</span> Run(<span class="c-code__keywordtype">string</span> resourceKey, ILoggerFactory loggerFactory, </div><div class="c-code__line">                TextWriter output, <span class="c-code__keywordtype">string</span> cloudEndPoint = <span class="c-code__stringliteral">&quot;&quot;</span>)</div><div class="c-code__line">            {</div><div class="c-code__line">                output.WriteLine(<span class="c-code__stringliteral">&quot;This example shows the details of devices &quot;</span> +</div><div class="c-code__line">                    <span class="c-code__stringliteral">&quot;associated with a given &#39;native model name&#39;.&quot;</span>);</div><div class="c-code__line">                output.WriteLine($<span class="c-code__stringliteral">&quot;The native model name can be retrieved by &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;code running on the device (For example, a mobile app).&quot;</span>);</div><div class="c-code__line">                output.WriteLine($<span class="c-code__stringliteral">&quot;For Android devices, see &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;https://developer.android.com/reference/android/os/Build#MODEL&quot;</span>);</div><div class="c-code__line">                output.WriteLine($<span class="c-code__stringliteral">&quot;For iOS devices, see &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;https://gist.github.com/soapyigu/c99e1f45553070726f14c1bb0a54053b#file-machinename-swift&quot;</span>);</div><div class="c-code__line">                output.WriteLine(<span class="c-code__stringliteral">&quot;----------------------------------------&quot;</span>);</div><div class="c-code__line"></div><div class="c-code__line">                HttpClient httpClient = <span class="c-code__keyword">new</span> HttpClient();</div><div class="c-code__line"></div><div class="c-code__line">                <span class="c-code__comment">// This example creates the pipeline and engines in code. For a demonstration</span></div><div class="c-code__line">                <span class="c-code__comment">// of how to do this using a configuration file instead, see the TacLookup example.</span></div><div class="c-code__line">                <span class="c-code__comment">// For more information about builders in general see the documentation at</span></div><div class="c-code__line">                <span class="c-code__comment">// https://51degrees.com/documentation/_concepts__configuration__builders__index.html</span></div><div class="c-code__line">                var cloudRequestEngineBuilder = <span class="c-code__keyword">new</span> CloudRequestEngineBuilder(loggerFactory, httpClient)</div><div class="c-code__line">                    .SetResourceKey(resourceKey);</div><div class="c-code__line"></div><div class="c-code__line">                <span class="c-code__comment">// If a cloud endpoint has been provided then set the</span></div><div class="c-code__line">                <span class="c-code__comment">// cloud pipeline endpoint. </span></div><div class="c-code__line">                <span class="c-code__keywordflow">if</span> (<span class="c-code__keywordtype">string</span>.IsNullOrWhiteSpace(cloudEndPoint) == <span class="c-code__keyword">false</span>)</div><div class="c-code__line">                {</div><div class="c-code__line">                    cloudRequestEngineBuilder.SetEndPoint(cloudEndPoint);</div><div class="c-code__line">                }</div><div class="c-code__line"></div><div class="c-code__line">                <span class="c-code__comment">// Create the cloud request engine.</span></div><div class="c-code__line">                <span class="c-code__keyword">using</span> (var cloudEngine = cloudRequestEngineBuilder.Build())</div><div class="c-code__line">                <span class="c-code__comment">// Create the hardware profile engine to process the response from the</span></div><div class="c-code__line">                <span class="c-code__comment">// request engine.</span></div><div class="c-code__line">                <span class="c-code__keyword">using</span> (var propertyKeyedEngine = <span class="c-code__keyword">new</span> HardwareProfileCloudEngineBuilder(loggerFactory)</div><div class="c-code__line">                    .Build())</div><div class="c-code__line">                <span class="c-code__comment">// Create the pipeline using the engines.</span></div><div class="c-code__line">                <span class="c-code__keyword">using</span> (var pipeline = <span class="c-code__keyword">new</span> PipelineBuilder(loggerFactory)</div><div class="c-code__line">                    .AddFlowElement(cloudEngine)</div><div class="c-code__line">                    .AddFlowElement(propertyKeyedEngine)</div><div class="c-code__line">                    .Build())</div><div class="c-code__line">                {</div><div class="c-code__line">                    <span class="c-code__comment">// Pass a native model into the pipeline and list the matching devices.</span></div><div class="c-code__line">                    AnalyseNativeModel(_nativeModel1, pipeline, output);</div><div class="c-code__line">                    <span class="c-code__comment">// Repeat for an alternative native model name.</span></div><div class="c-code__line">                    AnalyseNativeModel(_nativeModel2, pipeline, output);</div><div class="c-code__line">                }</div><div class="c-code__line">            }</div><div class="c-code__line"></div><div class="c-code__line">            <span class="c-code__keyword">static</span> <span class="c-code__keywordtype">void</span> AnalyseNativeModel(<span class="c-code__keywordtype">string</span> nativemodel, IPipeline pipeline, TextWriter output)</div><div class="c-code__line">            {</div><div class="c-code__line">                <span class="c-code__comment">// Create the FlowData instance. This is wrapped in a using block to ensure </span></div><div class="c-code__line">                <span class="c-code__comment">// resources are disposed correctly.</span></div><div class="c-code__line">                <span class="c-code__keyword">using</span> (var data = pipeline.CreateFlowData())</div><div class="c-code__line">                {</div><div class="c-code__line">                    <span class="c-code__comment">// Add the native model key as evidence.</span></div><div class="c-code__line">                    data.AddEvidence(Shared.Constants.EVIDENCE_QUERY_NATIVE_MODEL_KEY, nativemodel);</div><div class="c-code__line">                    <span class="c-code__comment">// Process the supplied evidence.</span></div><div class="c-code__line">                    data.Process();</div><div class="c-code__line">                    <span class="c-code__comment">// Get result data from the flow data.</span></div><div class="c-code__line">                    var result = data.Get&lt;MultiDeviceDataCloud&gt;();</div><div class="c-code__line">                    output.WriteLine($<span class="c-code__stringliteral">&quot;Which devices are associated with the &quot;</span> +</div><div class="c-code__line">                        $<span class="c-code__stringliteral">&quot;native model name &#39;{nativemodel}&#39;?&quot;</span>);</div><div class="c-code__line">                    <span class="c-code__comment">// The &#39;MultiDeviceDataCloud&#39; object contains one or more instances</span></div><div class="c-code__line">                    <span class="c-code__comment">// implementing &#39;IDeviceData&#39;.</span></div><div class="c-code__line">                    <span class="c-code__comment">// This is the same interface used for standard device detection, so we have</span></div><div class="c-code__line">                    <span class="c-code__comment">// access to all the same properties.</span></div><div class="c-code__line">                    <span class="c-code__keywordflow">foreach</span> (var device <span class="c-code__keywordflow">in</span> result.Profiles)</div><div class="c-code__line">                    {</div><div class="c-code__line">                        var vendor = device.HardwareVendor.GetHumanReadable();</div><div class="c-code__line">                        var name = device.HardwareName.GetHumanReadable();</div><div class="c-code__line">                        var model = device.HardwareModel.GetHumanReadable();</div><div class="c-code__line">                        output.WriteLine($<span class="c-code__stringliteral">&quot;\t{vendor} {name} ({model})&quot;</span>);</div><div class="c-code__line">                    }</div><div class="c-code__line">                }</div><div class="c-code__line">            }</div><div class="c-code__line">        }</div><div class="c-code__line"></div><div class="c-code__line">        <span class="c-code__keyword">static</span> <span class="c-code__keywordtype">void</span> Main(<span class="c-code__keywordtype">string</span>[] args)</div><div class="c-code__line">        {</div><div class="c-code__line">            <span class="c-code__comment">// Use the command line args to get the resource key if present.</span></div><div class="c-code__line">            <span class="c-code__comment">// Otherwise, get it from the environment variable.</span></div><div class="c-code__line">            <span class="c-code__keywordtype">string</span> resourceKey = args.Length &gt; 0 ? args[0] :</div><div class="c-code__line">                Environment.GetEnvironmentVariable(</div><div class="c-code__line">                    ExampleUtils.CLOUD_RESOURCE_KEY_ENV_VAR);</div><div class="c-code__line"></div><div class="c-code__line">            <span class="c-code__comment">// Configure a logger to output to the console.</span></div><div class="c-code__line">            var loggerFactory = LoggerFactory.Create(b =&gt; b.AddConsole());</div><div class="c-code__line">            var logger = loggerFactory.CreateLogger&lt;Program&gt;();</div><div class="c-code__line"></div><div class="c-code__line">            <span class="c-code__keywordflow">if</span> (<span class="c-code__keywordtype">string</span>.IsNullOrEmpty(resourceKey))</div><div class="c-code__line">            {</div><div class="c-code__line">                logger.LogError($<span class="c-code__stringliteral">&quot;No resource key specified on the command line or in the &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;environment variable &#39;{ExampleUtils.CLOUD_RESOURCE_KEY_ENV_VAR}&#39;. &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;The 51Degrees cloud service is accessed using a &#39;ResourceKey&#39;. &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;For more information &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;see https://51degrees.com/documentation/_info__resource_keys.html. &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;Native model lookup is not available as a free service. This means that &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;you will first need a license key, which can be purchased from our &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;pricing page: https://51degrees.com/pricing. Once this is done, a resource &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;key with the properties required by this example can be created at &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;https://configure.51degrees.com/QKyYH5XT. You can now populate the &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;environment variable mentioned at the start of this message with the &quot;</span> +</div><div class="c-code__line">                    $<span class="c-code__stringliteral">&quot;resource key or pass it as the first argument on the command line.&quot;</span>);</div><div class="c-code__line">            }</div><div class="c-code__line">            <span class="c-code__keywordflow">else</span></div><div class="c-code__line">            {</div><div class="c-code__line">                <span class="c-code__keyword">new</span> Example().Run(resourceKey, loggerFactory, Console.Out);</div><div class="c-code__line">            }</div><div class="c-code__line"></div><div class="c-code__line">            <span class="c-code__comment">// Dispose the logger to ensure any messages get flushed</span></div><div class="c-code__line">            loggerFactory.Dispose();</div><div class="c-code__line">        }</div><div class="c-code__line">    }</div><div class="c-code__line">}</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
