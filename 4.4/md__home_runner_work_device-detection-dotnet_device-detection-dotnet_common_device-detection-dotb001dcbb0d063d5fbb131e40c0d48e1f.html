<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection .NET: 51Degrees Device Detection API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection .NET
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_device-detection-dotnet_device-detection-dotnet_common_device-detection-dotb001dcbb0d063d5fbb131e40c0d48e1f.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="PageDoc"><div class="g-docs__header">
<div class="c-breadcrumb">
  <ul class="c-breadcrumb">
<li class="c-breadcrumb__item"><a class="c-breadcrumb__link" href="md__home_runner_work_device-detection-dotnet_device-detection-dotnet_common_device-detection-dotb001dcbb0d063d5fbb131e40c0d48e1f.html">51Degrees Device Detection API</a></li>  </ul>
</div>
<h2 class="g-docs__page-title">51Degrees Device Detection API </h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<section class="g-docs__section"><img src="https://51degrees.com/DesktopModules/FiftyOne/Distributor/Logo.ashx?utm_source=github&utm_medium=repository&utm_content=home&utm_campaign=c-open-source" alt="51Degrees" title="Data rewards the curious" class="inline"/>
 <b>Device Detection</b></p>
<p><a href="https://51degrees.com/device-detection-cxx/modules.html">C Documentation</a> and the <a href="https://51degrees.com/device-detection-cxx/namespaces.html">C++ Documentation</a>.</p>
<p>The 51Degrees device detection API is built on the 51Degrees <a href="https://github.com/51Degrees/common-cxx">common API</a>.</p>
<h1 class="g-docs__section-heading">Pre-requisites</h1>
<h2>Data File</h2>
<p>In order to perform device detection, you will need to use a 51Degrees data file. This repository includes a free, 'lite' file in the 'device-detection-data' sub-module that has a significantly reduced set of properties. To obtain a file with a more complete set of device properties see the <a href="https://51degrees.com/pricing">51Degrees website</a>. If you want to use the lite file, you will need to install <a href="https://git-lfs.github.com/">GitLFS</a>.</p>
<p>For Linux: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">sudo apt-get install git-lfs</div><div class="c-code__line">git lfs install</div></div><p>Then, navigate to the device-detection-data directory and execute:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">git lfs pull</div></div><h2>Fetching sub-modules</h2>
<p>This repository has sub-modules that must be fetched. If cloning for the first time, use:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">git clone --recurse-submodules https://github.com/51Degrees/device-detection-cxx.git</div></div><p>If you have already cloned the repository and want to fetch the sub modules, use:</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">git submodule update --init --recursive</div></div><p>If you have downloaded this repository as a zip file then these sub modules need to be downloaded separately as GitHub does not include then in the archive. In particular, note that the zip download will contain links to LFS content, rather than the files themselves. As such, these need to be downloaded individually.</p>
<h2>Build tools</h2>
<h3>Windows</h3>
<p>You will need either Visual Studio 2019 or the <a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/">C++ Build Tools</a> installed. If you have Visual Studio Code, you'll still need to install the build tools from the link above.</p><ul>
<li>Minimum Platform Toolset Version <code>v142</code></li>
<li>Minimum Windows SDK Version <code>10.0.18362.0</code></li>
</ul>
<h3>Linux</h3>
<p>You will need:</p><ul>
<li><a href="https://cmake.org/">CMake 3.24</a> or greater installed to build the project.</li>
<li>A C++ compiler which supports C++17. The compiler and other build tools will be selected by CMake automatically based on your environment.</li>
</ul>
<h1 class="g-docs__section-heading">Installing</h1>
<h2>Using CMake</h2>
<p>To build the make files required to build, open a <code>bash</code> or <code>Visual Studio Developer Command Prompt</code> terminal and run</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">mkdir build</div><div class="c-code__line">cd build</div><div class="c-code__line">cmake .. </div></div><p>Note: on an x64 Windows system, it is necessary to add <code>-A x64</code> as CMake will build a Win32 Solution by default.</p>
<p>Note: when building arm64 binaries on x64 Mac system, it is necessary to add <code>-DBUILD_TESTING=OFF</code> as CTest (<a href="https://cmake.org/cmake/help/latest/module/CTest.html">ref</a>) will otherwise fail the build due to inability to run test executables designated for different CPU.</p>
<p>Note: for maximum possible performance file based operation can be disabled by adding <code>-DMemoryOnly=YES</code> to the <code>cmake ..</code> command.</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">mkdir build</div><div class="c-code__line">cd build</div><div class="c-code__line">cmake .. -DMemoryOnly=YES</div></div><p>Then build the whole solution with</p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line">cmake --build . --config Release</div></div><p>Libraries are output to the <code>lib/</code> directory, and executables like examples and tests are output to the <code>bin/</code> directory.</p>
<h2>Using Visual Studio</h2>
<p>Calling <code>CMake</code> in an MSVC environment (as described in the <a href="#Using-CMake">Using CMake</a> section) will produce a Visual Studio solution with projects for all libraries, examples, and tests. However, it is preferable to use the dedicated Visual Studio solution in the <code>VisualStudio/</code> directory.</p>
<h2>Build Options</h2>
<p>For build options, see Common API</p>
<h1 class="g-docs__section-heading">Tests</h1>
<p>All unit, integration, and performance tests are built using the <a href="https://github.com/google/googletest">Google test framework</a>.</p>
<h2>CMake</h2>
<p>CMake automatically pulls in the latest Google Test from GitHub.</p>
<p>Building the project builds multiple test executables to the <code>bin/</code> directory: <code>HashTests</code> and any common testing included in the common-cxx library.</p>
<p>These can be run by calling </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">ctest</div></div><p>If CMake has been used in an MSVC environment, then the tests will be set up and discoverable in the Visual Studio solution <code>51DegreesDeviceDetection</code> created by CMake.</p>
<h2>Visual Studio</h2>
<p>Tests in the Visual Studio solution automatically install the GTest dependency via a NuGet package. However, in order for the tests to show up in the Visual Studio test explorer, the <a href="https://marketplace.visualstudio.com/items?itemName=VisualCPPTeam.TestAdapterforGoogleTest">Test Adapter for Google Test</a> extension must be installed.</p>
<p>The VisualStudio solution includes <code>FiftyOne.DeviceDetection.Hash.Tests</code>, which can be run through the standard Visual Studio test runner.</p>
<h2>Code Coverage</h2>
<p>When the project files are generated for a non-MSVC compiler (gcc/clang) with <code>CMAKE_BUILD_TYPE=Debug</code> f.e. by running: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">cmake . -DCMAKE_BUILD_TYPE=Debug</div></div><p>the generated targets will contain code coverage instrumentation instructions to be added to the libraries with <code>-cov</code> suffix and <code>HashTests</code> target will be linked with them. During build time <code>*.gcno</code> and empty <code>*.gcda</code> files are generated.</p>
<p>During the test run <code>*.gcda</code> files will be filled with coverage data.</p>
<p>Install gcovr tool by running: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">pip3 install gcovr</div></div><p>For best results make sure you have at least version 7.2.</p>
<p>The following command will generate a full coverage report: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">mkdir -p coverage; gcovr --html-detail -o coverage/coverage.html; open coverage/coverage.html</div></div><p>To check the summary run: </p><div class="c-code__block c-code__block--outline"><div class="c-code__line">gcovr -r . --print-summary</div></div><h1 class="g-docs__section-heading">Referencing the API</h1>
<h2>CMake</h2>
<p>When building using CMake, static libraries are built in stages. These can be included in an executable just as they are in the examples. If these are included through a CMake file, the dependencies will be resolved automatically. However, if linking another way, all dependencies will need to be included from the <code>lib/</code> directory. For example, to use the Hash C API, the following static libraries would need to be included:</p><ul>
<li><code>fiftyone-common-c</code></li>
<li><code>fiftyone-device-detection-c</code></li>
<li><code>fiftyone-hash-c</code></li>
</ul>
<p>and for the Hash C++ API, the following are needed in addition:</p><ul>
<li><code>fiftyone-common-cxx</code></li>
<li><code>fiftyone-device-detection-cxx</code></li>
<li><code>fiftyone-hash-cxx</code></li>
</ul>
<p>The CMake project also builds a single shared library containing everything. This is named <code>fiftyone-device-detection-complete</code> and can be referenced by any C or C++ project.</p>
<h2>Visual Studio</h2>
<p>The Visual Studio solution contains static libraries which have all the dependencies set up correctly, so referencing these in a Visual Studio solution should be fairly self explanatory.</p>
<h1 class="g-docs__section-heading">Examples</h1>
<p>There are several examples available, the source files can be found in the <code>examples/</code> folder. The examples are written in C or CPP.</p>
<h3>Visual Studio</h3>
<p>All the examples are available to run in the <code>VisualStudio/DeviceDetection.sln</code> solution.</p>
<h2>Device Detection Examples</h2>
<div class="g-table g-table--overflow"><table class="c-table">
<tr class="c-table__row--heading">
<td class="c-table__cell">Language  </td><td class="c-table__cell">Example  </td><td class="c-table__cell">Description   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C/C++  </td><td class="c-table__cell">GettingStarted  </td><td class="c-table__cell">This example shows how to get set up with a Device Detection Cloud aspect engine and begin using it to process User-Agents and Client Hints.<br />
Also showcase <code>query.51D_deviceId</code> high-priority evidence feature (streamlines profile selection).   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C/C++  </td><td class="c-table__cell">MatchMetrics  </td><td class="c-table__cell">This example shows how to view metrics associated with the results of processing with a Device Detection aspect engine using the Hash algorithm.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C++  </td><td class="c-table__cell">MetaData  </td><td class="c-table__cell">This example shows how to interrogate the meta data associated with the contents of a Device Detection Hash data file.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">MemHash  </td><td class="c-table__cell">This example measures the memory usage of the Hash algorithm.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">OfflineProcessing  </td><td class="c-table__cell">This example shows how process data for later viewing using a Device Detection Hash data file.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">Performance  </td><td class="c-table__cell">Command line performance evaluation program which takes a file of user agents and returns a performance score measured in detections per second per CPU core.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">ProcHash  </td><td class="c-table__cell">Command line process which takes a user agent via stdin and return device properties via stdout.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C/C++  </td><td class="c-table__cell">ReloadFromFile  </td><td class="c-table__cell">This example illustrates how to reload the data file from the data file on disk without restarting the application.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C/C++  </td><td class="c-table__cell">ReloadFromMemory  </td><td class="c-table__cell">This example illustrates how to reload the data file from a continuous memory space that the data file was read into without restarting the application.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C/C++  </td><td class="c-table__cell">StronglyTyped  </td><td class="c-table__cell">This example takes some common User-Agents and returns the value of the IsMobile property as a boolean.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">MatchForDeviceId  </td><td class="c-table__cell">Retrieve device by deviceId used as evidence. DeviceId may have been obtained previously and stored to later lookup the device properties.   </td></tr>
<tr class="c-table__row">
<td class="c-table__cell">C  </td><td class="c-table__cell">FindProfiles  </td><td class="c-table__cell">Find all profiles that match a certain property value - in this example we count the number of mobile (IsMobile=true) profiles   </td></tr>
</table>
</div> </section></div><!-- PageDoc -->
</div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
